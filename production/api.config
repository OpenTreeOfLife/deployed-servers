# Configuration for 'api' host (m3.large, 250G disk)
#   a.k.a. api.opentreeoflife.org
# Do push-db for the two databases manually, followed by index
OPENTREE_TAG=ot20
OPENTREE_HOST=${OPENTREE_TAG}.opentreeoflife.org
OPENTREE_COMPONENTS='phylesystem-api oti treemachine taxomachine smasher'
OPENTREE_IDENTITY=~/.ssh/opentree/production.pem

# Instead of managing lots of single-repo deployment keys, use a
# single key (assigned to opentreeapi bot user) for all docstore repos
OPENTREE_GH_IDENTITY=~/.ssh/opentree/opentreeapi-gh.pem

# ***** Use phylesystem-0 for testing, phylesystem-1 for release *****
# OPENTREE_DOCSTORE=phylesystem-0
OPENTREE_DOCSTORE=phylesystem-1
# define minor repos for collections, following in curation app
COLLECTIONS_REPO=collections-1
FAVORITES_REPO=favorites-0  # currently unused (and no such repo)!

# ***** Use ${OPENTREE_HOST} for testing, 'api.opentreeoflife.org' for release *****
# OPENTREE_API_HOST=${OPENTREE_HOST}
OPENTREE_API_HOST=api.opentreeoflife.org

# N.B. we now require HTTPS for all APIs, so scheme-relative URLs no longer make sense here
OPENTREE_API_BASE_URL=https://${OPENTREE_API_HOST}/phylesystem/v1
COLLECTIONS_API_BASE_URL=https://${OPENTREE_API_HOST}/v2
FAVORITES_API_BASE_URL=https://${OPENTREE_API_HOST}/v2
OTI_BASE_URL=https://${OPENTREE_API_HOST}/oti/v1

OPEN_TREE_API_LOGGING_LEVEL=debug
OPEN_TREE_API_LOGGING_FILEPATH=/home/opentree/log/api.log
OPEN_TREE_API_LOGGING_FORMATTER=rich

# master for 'continuous deployment' per new policy 2014-09-05
OPENTREE_BRANCH=master

opentree_branch peyotl $OPENTREE_BRANCH
opentree_branch phylesystem-api $OPENTREE_BRANCH
opentree_branch ot-base $OPENTREE_BRANCH
opentree_branch oti $OPENTREE_BRANCH
opentree_branch treemachine $OPENTREE_BRANCH
opentree_branch taxomachine $OPENTREE_BRANCH

# Which component(s) needs this?
export PEYOTL_LOGGING_LEVEL=debug
export PEYOTL_LOG_FILE_PATH=/home/opentree/log/peyotl.log

# No opentree webapp on this server
OPENTREE_DEFAULT_APPLICATION=welcome
